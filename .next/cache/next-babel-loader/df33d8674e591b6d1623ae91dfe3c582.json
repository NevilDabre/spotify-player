{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nevil\\\\Documents\\\\Study Projects\\\\React\\\\spot-player\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { Component, useEffect, useState } from 'react';\nimport SpotifyWebApi from 'spotify-web-api-js';\nvar spotifyApi = new SpotifyWebApi();\nexport var authEndpoint = 'https://accounts.spotify.com/authorize';\nvar clientId = 'bc49f02eb2ed4712ae02fd6c17d41f5c';\nvar redirectUri = 'http://localhost:3000';\nvar scopes = ['user-read-currently-playing', 'user-read-playback-state'];\n\nvar Index = function Index() {\n  var _useState = useState(null),\n      token = _useState[0],\n      setToken = _useState[1];\n\n  var _useState2 = useState(null),\n      albumName = _useState2[0],\n      setAlbumName = _useState2[1];\n\n  var _useState3 = useState(null),\n      albumArt = _useState3[0],\n      setAlbumArt = _useState3[1];\n\n  useEffect(function () {\n    // Get the hash of the url\n    var hash = window.location.hash.substring(1).split(\"&\").reduce(function (initial, item) {\n      if (item) {\n        var parts = item.split(\"=\");\n        initial[parts[0]] = decodeURIComponent(parts[1]);\n      }\n\n      return initial;\n    }, {});\n    window.location.hash = \"\";\n    var _token = hash.access_token;\n\n    if (_token) {\n      //Set token\n      setToken(_token);\n    }\n  });\n\n  var getNowPlaying = function getNowPlaying() {\n    spotifyApi.setAccessToken(token);\n    spotifyApi.getNewReleases({\n      limit: 5,\n      offset: 0\n    }, function (err, data) {\n      if (err) console.error(err);else console.log('Artist albums', data);\n    });\n  };\n\n  return __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Hello Spotify!\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, !token && __jsx(\"a\", {\n    href: \"\".concat(authEndpoint, \"?client_id=\").concat(clientId, \"&redirect_uri=\").concat(redirectUri, \"&scope=\").concat(scopes.join(\"%20\"), \"&response_type=token&show_dialog=true\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Login to Spotify\"), token && __jsx(React.Fragment, null, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Now Playing: \", albumName), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: albumArt,\n    style: {\n      height: 150\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })), __jsx(\"button\", {\n    onClick: function onClick() {\n      return getNowPlaying();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Check Now Playing\"))));\n};\n\nexport default Index;","map":{"version":3,"sources":["C:/Users/Nevil/Documents/Study Projects/React/spot-player/pages/index.js"],"names":["React","Component","useEffect","useState","SpotifyWebApi","spotifyApi","authEndpoint","clientId","redirectUri","scopes","Index","token","setToken","albumName","setAlbumName","albumArt","setAlbumArt","hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","_token","access_token","getNowPlaying","setAccessToken","getNewReleases","limit","offset","err","data","console","error","log","display","alignItems","justifyContent","flexDirection","join","height"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\r\nimport SpotifyWebApi from 'spotify-web-api-js'\r\nconst spotifyApi = new SpotifyWebApi();\r\n\r\nexport const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n\r\nconst clientId = 'bc49f02eb2ed4712ae02fd6c17d41f5c';\r\nconst redirectUri = 'http://localhost:3000';\r\nconst scopes = [\r\n    'user-read-currently-playing',\r\n    'user-read-playback-state'\r\n]\r\n\r\n\r\n\r\nconst Index = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [albumName, setAlbumName] = useState(null)\r\n    const [albumArt, setAlbumArt] = useState(null)\r\n    useEffect(() => {\r\n        // Get the hash of the url\r\n        const hash = window.location.hash\r\n            .substring(1)\r\n            .split(\"&\")\r\n            .reduce(function (initial, item) {\r\n                if (item) {\r\n                    var parts = item.split(\"=\");\r\n                    initial[parts[0]] = decodeURIComponent(parts[1]);\r\n                }\r\n                return initial;\r\n            }, {});\r\n        window.location.hash = \"\";\r\n\r\n        let _token = hash.access_token;\r\n        if (_token) {\r\n            //Set token\r\n            setToken(_token)\r\n        }\r\n    })\r\n\r\n    const getNowPlaying = () => {\r\n        spotifyApi.setAccessToken(token);\r\n        spotifyApi.getNewReleases({ limit : 5, offset: 0 }, function(err, data) {\r\n            if (err) console.error(err);\r\n            else console.log('Artist albums', data);\r\n          });\r\n    }\r\n\r\n    return (\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection: 'column' }}>\r\n            <h1>Hello Spotify!</h1>\r\n            <div>\r\n                {!token &&\r\n                    (<a\r\n                        href={`${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\"%20\")}&response_type=token&show_dialog=true`}\r\n                    >\r\n                        Login to Spotify\r\n                      </a>)}\r\n                {token &&\r\n                    <>\r\n                        <div>\r\n                            Now Playing: {albumName}\r\n                        </div>\r\n                        <div>\r\n                            <img src={albumArt} style={{ height: 150 }} />\r\n                        </div>\r\n                        <button onClick={() => getNowPlaying()}>Check Now Playing</button>\r\n                    </>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}